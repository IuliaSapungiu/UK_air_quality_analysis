# UK Air Quality Analysis During and After COVID-19 Pandemic
###### This project is for academic/educational purposes. Data is sourced from UK-AIR (DEFRA) and subject to their terms of use.
###### All rights reserved © Iulia Sapungiu

## Table of contents
 - [Project Overview](#project-overview)
 - [Research Questions](#research-questions)
 - [Technologies](#technologies)
 - [Installation and usage](#installation-and-usage)
 - [Project Structure](#project-structure)


### Project Overview
This project analyzes how air pollutant concentrations (PM₂.₅, PM₁₀, NO₂, and O₃) varied across four major UK cities (Edinburgh, London, Manchester, Sheffield) during the pandemic period (2020-2021) and post-pandemic recovery (2022-2024). 
The analysis uses data from UK Data Selector - Air urban background monitoring stations to examine temporal and spatial patterns, and develops predictive models to understand relationships between pollutants.

### Research Questions
- RQ1 (Exploratory Data Analysis)
How did daily concentrations of PM₂.₅, PM₁₀, NO₂, and O₃ vary across major UK cities during and after the COVID-19 pandemic period (2020-2024)?
- RQ2 (Simple Linear Regression)
How well does NO₂ alone explain variation in daily PM₂.₅ concentrations across the selected UK cities, stratified by city and period?
- RQ3 (Multiple Linear Regression)
Do additional pollutants (PM₁₀ and O₃) improve prediction of PM₂.₅ beyond NO₂ alone, stratified by city and period?

### Technologies
- R version 4.0.0 or higher
- tidyverse - Data Manipulation and visualisation
- lubridate - Date handling
- ggplot2 - Plotting
- patchwork - combining plots
- corrplot - Correlation matrix visualisation

### Installation and usage
#### Step 1: Setup
1. Clone or download this repository _(make sure to delete plots and processed_data folders so that you create them when running the code)_
2. Open R or RStudio and set your working directory to the project folder ```air_quality_analysis```
3. Install required packages (if not already installed) and load them one by one:

   ```
    install.packages(c("tidyverse", "lubridate", "ggplot2", "patchwork", "corrplot"))
   
    library(tidyverse)    
    library(lubridate)    
    library(ggplot2)      
    library(patchwork)
    library(corrplot)
   ```

4. Configuration option (Saving behaviour - code line 27)

   ```
    save_plots_to_file <- TRUE  # Set to FALSE to display plots in RStudio only
   ```
   - TRUE: Plots are saved to plots/ folder (faster, recommended)
   - FALSE: Plots are displayed in RStudio viewer (slower, for interactive viewing)

#### Step 2: Run EDA (Research Question 1)

   ```
    source("01_EDA_analysis.R")
   ```
  What this does:
  - Loads and cleans raw data
  - Generates daily time-series plots (4 pollutants × 4 cities)
  - Creates monthly trend visualizations
  - Performs pandemic vs. post-pandemic statistical comparisons (t-tests)
  - Analyzes pollutant relationships (correlations and scatterplots)
  - Saves processed datasets to processed_data/ folder
  - Saves all plots to plots/ folder

#### Step 3: Run Regression Models (Research Questions 2 & 3)
After completing Step 2, run the regression analysis:

   ```
    source("02_regression_models.R")
   ```

What this does:
- Loads processed data from Step 2
- Splits data into training (80%) and test (20%) sets
- Fits separate regression models for each City × Period combination:
  - RQ2: PM₂.₅ ~ NO₂ (simple regression, 8 models)
  - RQ3: PM₂.₅ ~ NO₂ + PM₁₀ + O₃ (multiple regression, 8 models)
- Evaluates models on independent test sets
- Checks for multicollinearity (VIF)
- Compares RQ2 vs. RQ3 performance
- Saves all results and visualizations

### Project Structure

```
UK-Air-Quality-Analysis/
│
├── README.md                          # This file
├── uk_air_quality_data.csv           # Raw dataset from UK-AIR (not included - add your own)
│
├── scripts/
│   ├── 01_EDA_analysis.R             # Exploratory Data Analysis (RQ1)
│   └── 02_regression_models.R        # Regression modeling (RQ2 & RQ3)
│
├── processed_data/                    # Generated by 01_EDA_analysis.R
│   ├── air_quality_clean_long.csv    # Clean data in long format
│   ├── air_quality_clean_wide.csv    # Clean data in wide format
│   ├── air_quality_monthly.csv       # Monthly aggregated data
│   ├── period_summary.csv            # Descriptive stats by period
│   ├── test_results.csv              # T-test results (pandemic vs post)
│   ├── correlation_matrix.csv        # Correlation matrix (training data)
│   ├── RQ2_city_period_summary.csv   # RQ2 regression results
│   ├── RQ3_city_period_summary.csv   # RQ3 regression results
│   └── RQ2_vs_RQ3_comparison.csv     # Model comparison results
│
└── plots/                             # Generated visualizations
    ├── daily_timeseries_*.png        # Daily time-series plots (4 pollutants)
    ├── monthly_trend_*.png           # Monthly aggregated trends (4 pollutants)
    ├── boxplot_comparison_*.png      # Period comparison boxplots (4 pollutants)
    ├── scatterplot_*.png             # Pollutant relationship plots
    ├── correlation_matrix.png        # Correlation heatmap
    ├── RQ2_*.png                     # RQ2 visualizations
    ├── RQ3_*.png                     # RQ3 visualizations
    └── RQ2_vs_RQ3_*.png              # Model comparison plots

```
